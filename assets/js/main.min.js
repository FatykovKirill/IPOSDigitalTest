const list=[{mark:"audi",model:"A4",year:"2015",delivery:"21.05.2021-28.02.2022"},{mark:"audi",model:"A4",year:"2016",delivery:"01.05.2021-21.03.2022"},{mark:"audi",model:"A5",year:"2015",delivery:"21.05.2021-28.06.2021"},{mark:"ВАЗ",model:"2101",year:"1970",delivery:"21.05.2021-28.02.2022"}],press=document.querySelector(".press"),choosepress=document.querySelector("#press"),chooseBtn=document.querySelector("#btn"),squart=document.querySelectorAll(".squart"),choosesquart=document.querySelectorAll(".squart-choose"),btn=document.querySelector(".btn"),btnModal=document.querySelector(".btnModal"),date=document.querySelector(".date"),modal=document.querySelector(".modal"),mark=document.querySelector("#mark"),model=document.querySelector("#model"),year=document.querySelector("#year");function AddDnSquart(){squart.forEach(e=>{e.classList.add("display-none")})}function RemoveDnPress(){press.classList.remove("display-none")}function AddPointer(){btn.classList.add("pointer")}setTimeout(AddDnSquart,3500),setTimeout(RemoveDnPress,3500),setTimeout(AddPointer,7e3),btn.addEventListener("click",()=>{if(btn.classList.contains("pointer")){modal.classList.remove("display-none"),btn.classList.add("display-none"),btn.classList.remove("squarts"),btn.classList.remove("pointer");let a=1;squart.forEach(e=>{e.classList.remove("squart-"+a++)}),squart.forEach(e=>{e.classList.remove("squart")}),btn.classList.remove("btn")}}),mark.innerHTML='<option value="">Марка машины</option>',model.innerHTML='<option value="">Модель машины</option>',year.innerHTML='<option value="">Год</option>',mark.addEventListener("focus",()=>{let s=[];list.forEach(e=>s.push(e.mark));var e=s.filter((e,a)=>s.indexOf(e)===a);let a='<option value="">Марка машины</option>';e.forEach(e=>a+=`<option value="${e}">${e}</option>`),mark.innerHTML=a,model.disabled=!1}),model.addEventListener("focus",()=>{var e=list.filter(e=>e.mark==mark.value);let s=[];e.forEach(e=>s.push(e.model));e=s.filter((e,a)=>s.indexOf(e)===a);let a='<option value="">Модель машины</option>';e.forEach(e=>a+=`<option value="${e}">${e}</option>`),model.innerHTML=a,year.disabled=!1}),year.addEventListener("focus",()=>{var e=list.filter(e=>e.model==model.value);let s=[];e.forEach(e=>s.push(e.year));e=s.filter((e,a)=>s.indexOf(e)===a);let a='<option value="">Год</option>';e.forEach(e=>a+=`<option value="${e}">${e}</option>`),year.innerHTML=a,btnModal.classList.remove("display-none")}),1==year.disabled&&btnModal.classList.add("display-none"),btnModal.addEventListener("click",()=>{var e,a;""==mark.value||""==model.value||""==year.value?(alert("Не все поля заполнены"),date.classList.add("display-none")):(a=list.filter(e=>e.mark==mark.value).filter(e=>e.model==model.value).filter(e=>e.year==year.value),date.classList.remove("display-none"),e=(e=a[0].delivery.slice(0,10)).slice(6)+"-"+e.slice(3,5)+"-"+e.slice(0,2),a=(a=a[0].delivery.slice(11)).slice(6)+"-"+a.slice(3,5)+"-"+a.slice(0,2),date.min=e,date.max=a,date.addEventListener("change",()=>{modal.classList.add("display-none"),chooseBtn.classList.remove("display-none"),choosepress.classList.remove("display-none"),choosepress.innerHTML=`вы выбрали ${mark.value} ${model.value} ${year.value},<br> доставка ${date.value},<br> начать заново`}),chooseBtn.addEventListener("click",()=>{mark.value="",model.value="",year.value="",date.value="",model.disabled=!0,year.disabled=!0,modal.classList.add("display-none"),btnModal.classList.add("display-none"),date.classList.add("display-none"),chooseBtn.classList.add("display-none"),choosepress.classList.add("display-none"),btn.classList.add("squarts"),press.classList.add("display-none");let a=1;choosesquart.forEach(e=>{e.classList.add("squart-"+a++)}),choosesquart.forEach(e=>{e.classList.add("squart")}),choosesquart.forEach(e=>{e.classList.remove("display-none")}),setTimeout(AddDnSquart,3500),setTimeout(RemoveDnPress,3500),setTimeout(AddPointer,7e3)}))});